<div class="dialog-content-wrapper">
  <mat-toolbar
    *ngIf="card"
    matDialogTitle
    class="accent m-0"
    fxFlex="1 0 auto"
    fxLayout="row"
  >
    <div fxFlex fxLayout="row" fxLayoutAlign="space-between center">
      <div fxFlex fxLayout="row" fxLayoutAlign="start center">
        <!-- OPTIONS -->
        <div class="options " fxFlex="0 1 auto">
          <button mat-icon-button class="" [matMenuTriggerFor]="optionsMenu">
            <mat-icon>more_horiz</mat-icon>
          </button>

          <mat-menu #optionsMenu="matMenu" [overlapTrigger]="false">
            <button mat-menu-item (click)="removeCard()">
              Remove Card
            </button>
          </mat-menu>
        </div>
        <!-- / OPTIONS -->
      </div>

      <!-- CLOSE DIALOG BUTTON -->
      <button
        mat-icon-button
        (click)="matDialogRef.close()"
        aria-label="Close Dialog"
      >
        <mat-icon>close</mat-icon>
      </button>
      <!-- / CLOSE DIALOG BUTTON -->
    </div>
  </mat-toolbar>

  <div
    *ngIf="card"
    mat-dialog-content
    class="py-24 px-0 m-0"
    fusePerfectScrollbar
  >
    <!-- DESCRIPTION -->
    <div class="description px-24 mb-16">
      <div class="list-card-name" [innerHTML]="card.title"></div>
      <div *ngIf="card.imageUrl" class="article-image">
        <img [src]="card.imageUrl" />
      </div>
      <div class="list-card-summary" [innerHTML]="card.summary"></div>
    </div>
    <!-- / DESCRIPTION -->

    <!-- SECTIONS -->
    <div class="sections">
      <!-- COMMENTS SECTION -->
      <div class="section">
        <div class="comments">
          <div
            class="section-header"
            fxLayout="row"
            fxLayoutAlign="start center"
          >
            <mat-icon class="mr-8">comment</mat-icon>
            <span class="section-title">Comments</span>
          </div>

          <div class="section-content">
            <form
              name="cardCommentForm"
              #newCommentForm="ngForm"
              (submit)="addNewComment(newCommentForm)"
              class="comment new-comment"
              fxLayout="column"
              fxLayoutAlign="start"
              no-validate
            >
              <div fxLayout="row" fxLayoutAlign="center center">
                <img
                  class="comment-member-avatar"
                  src="assets/images/avatars/profile.jpg"
                />

                <mat-form-field class="mr-12" appearance="outline" fxFlex>
                  <mat-label>Comment</mat-label>
                  <input
                    matInput
                    name="newComment"
                    ngModel
                    #newComment="ngModel"
                    required
                  />
                </mat-form-field>

                <button
                  mat-mini-fab
                  class="mat-accent"
                  [disabled]="!newCommentForm.valid || newCommentForm.pristine"
                  aria-label="Add"
                >
                  <mat-icon>add</mat-icon>
                </button>
              </div>
            </form>

            <div
              class="comment"
              fxLayout="row"
              fxLayoutAlign="start center"
              *ngFor="let comment of card.comments"
            >
              <img
                class="comment-member-avatar"
                src="assets/images/avatars/profile.jpg"
              />

              <div fxLayout="column">
                <div class="comment-member-name">
                  Andreea
                </div>
                <div class="comment-bubble">{{ comment.message }}</div>
                <div class="comment-time secondary-text">
                  {{ comment.time }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- / COMMENTS SECTION -->
    </div>
    <!-- / SECTIONS -->
  </div>
</div>
